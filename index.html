<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8' />
    <title>Final Project</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <link href="https://api.mapbox.com/mapbox-assembly/v0.24.0/assembly.min.css" rel="stylesheet">
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.5.1/mapbox-gl.css' rel='stylesheet' />
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.css' rel='stylesheet' />
    <script src='https://api.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.js'></script>
    <script src='https://api.mapbox.com/mapbox.js/plugins/turf/v3.0.11/turf.min.js'></script>

    <style>
        body {
            margin: 0;
            padding: 0;
        }
    </style>
</head>

<body>

    <div class='grid bg-gray-dark absolute h-full w-full'>
        <div class='col col--12 border-b border--white color-white'>
            <h1 class='txt-h2 mx36 my24 inline-block'>Final Project Map</h1>
            <p class='fr mr24 mt36'>Sources: <a class='link' target='_blank'
                    href='https://mygeodata.cloud/data/download/osm/schools/united-states-of-america--colorado/denver-county/denver'>Schools:
                    MyGeodata Cloud</a> and
                <a class='link' target='_blank'
                    href='https://mygeodata.cloud/data/download/osm/hospitals/united-states-of-america--colorado'>
                    Hospitals: MyGeodata Cloud</a></p>
        </div>
        <div class='col col--12 h-full relative'>
            <div id='map' class='w-full h-full'></div>
            <div id='legend'
                class='w180 bg-white absolute top right mt18 mr18 round shadow-darken10 px12 py12 txt-s none'>
                <strong class='block mb6 txt-l'>Zones</strong>
                <ul class='ul mb6'></ul>
            </div>
        </div>
    </div>

    <script async defer src="https://api.mapbox.com/mapbox-assembly/v0.24.0/assembly.js"></script>
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.5.1/mapbox-gl.js'></script>
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <script>
        // access token
        mapboxgl.accessToken =
            'pk.eyJ1Ijoic2p0YW1tZSIsImEiOiJja2k5NHozZDEwY2JrMnZueDYyemF6MW5lIn0.h76rcKDSZ9pmmvrCFSWXyQ';

        // create a new map
        const map = new mapboxgl.Map({
            container: 'map', // container id
            style: 'mapbox://styles/mapbox/light-v10', // stylesheet location
            center: [-104.9903, 39.7392], // starting position
            zoom: 12 // starting zoom
        });

        const hospitals = {"type":"FeatureCollection","features":[{"type":"Feature","properties":{"Label":"Bonfils Blood Center"},"geometry":{"type":"Point","coordinates":[-105.1552468,39.7442094]}},{"type":"Feature","properties":{"Label":"Buck Creek Medical Center"},"geometry":{"type":"Point","coordinates":[-106.5223865,39.6396839]}},{"type":"Feature","properties":{"Label":"Cedar Springs Hospital"},"geometry":{"type":"Point","coordinates":[-104.8166404,38.8019373]}},{"type":"Feature","properties":{"Label":"Child First Pediatrics"},"geometry":{"type":"Point","coordinates":[-104.8848628,39.5840004]}},{"type":"Feature","properties":{"Label":"Children's Hospital Colorado at Memorial Hospital"},"geometry":{"type":"Point","coordinates":[-104.799593,38.8393776]}},{"type":"Feature","properties":{"Label":"Children's Hospital Colorado at Parker Adventist Hospital, Emergency Care, Parker"},"geometry":{"type":"Point","coordinates":[-104.7699255,39.5479351]}},{"type":"Feature","properties":{"Label":"Colorado Mental Health Institute-Fort Logan"},"geometry":{"type":"Point","coordinates":[-105.034208,39.641285]}},{"type":"Feature","properties":{"Label":"Concentra Urgent Care"},"geometry":{"type":"Point","coordinates":[-104.8669724,39.6754177]}},{"type":"Feature","properties":{"Label":"Delta Memorial Hospital"},"geometry":{"type":"Point","coordinates":[-108.0480952,38.7449589]}},{"type":"Feature","properties":{"Label":"Denver Health Medical Center Emergency Department Trauma Center"},"geometry":{"type":"Point","coordinates":[-104.990709,39.7284644]}},{"type":"Feature","properties":{"Label":"Denver Health Medical Emergency Center for Children"},"geometry":{"type":"Point","coordinates":[-104.9910818,39.7276558]}},{"type":"Feature","properties":{"Label":"Denver West Surgery Center"},"geometry":{"type":"Point","coordinates":[-105.1529788,39.7464202]}},{"type":"Feature","properties":{"Label":"Eben-Ezer Lutheran Care Center"},"geometry":{"type":"Point","coordinates":[-103.6429792,40.2546936]}},{"type":"Feature","properties":{"Label":"Flying Horse Medical & Aesthetics Center"},"geometry":{"type":"Point","coordinates":[-104.7987826,39.0257709]}},{"type":"Feature","properties":{"Label":"Founders Family Medicine and Urgent Care"},"geometry":{"type":"Point","coordinates":[-104.8590777,39.4061699]}},{"type":"Feature","properties":{"Label":"Health Unit"},"geometry":{"type":"Point","coordinates":[-105.1164519,39.7173623]}},{"type":"Feature","properties":{"Label":"Hearing Rehab Center"},"geometry":{"type":"Point","coordinates":[-105.0953676,40.5558611]}},{"type":"Feature","properties":{"Label":"Kindred Hospital Aurora"},"geometry":{"type":"Point","coordinates":[-104.8266092,39.7281498]}},{"type":"Feature","properties":{"Label":"Kindred Hospital Denver"},"geometry":{"type":"Point","coordinates":[-104.9644468,39.74628]}},{"type":"Feature","properties":{"Label":"Kit Carson County Memorial Hospital"},"geometry":{"type":"Point","coordinates":[-102.2704064,39.3029706]}},{"type":"Feature","properties":{"Label":"Peoples clinic"},"geometry":{"type":"Point","coordinates":[-105.2825243,40.0353161]}},{"type":"Feature","properties":{"Label":"SCL Health Saint Joseph Hospital"},"geometry":{"type":"Point","coordinates":[-104.9710857,39.7461762]}},{"type":"Feature","properties":{"Label":"Tennyson Center for Children at Colorado Christian Home"},"geometry":{"type":"Point","coordinates":[-105.0434853,39.7594523]}},{"type":"Feature","properties":{"Label":"The Denver Hospice"},"geometry":{"type":"Point","coordinates":[-104.8919851,39.7199008]}},{"type":"Feature","properties":{"Label":"UC Health Hospital UNDER CONSTRUCTION"},"geometry":{"type":"Point","coordinates":[-105.0055419,39.5522109]}},{"type":"Feature","properties":{"Label":"UCHealth Sterling Ranch Medical Center"},"geometry":{"type":"Point","coordinates":[-105.0374595,39.5068577]}},{"type":"Feature","properties":{"Label":"University of Colorado Hospital"},"geometry":{"type":"Point","coordinates":[-104.841661,39.7425435]}},{"type":"Feature","properties":{"Label":null},"geometry":{"type":"Point","coordinates":[-105.2430555,40.0192855]}}]}
        
        const schools = {"type":"FeatureCollection","features":[{"type":"Feature","properties":{"Label":"Abraham Lincoln High School"},"geometry":{"type":"Point","coordinates":[-105.0269275,39.676654]}},{"type":"Feature","properties":{"Label":"Academia Ana Marie Sandoval"},"geometry":{"type":"Point","coordinates":[-105.0154322,39.7671278]}},{"type":"Feature","properties":{"Label":"Academy of Urban Learning High School"},"geometry":{"type":"Point","coordinates":[-105.0168924,39.7586854]}},{"type":"Feature","properties":{"Label":"Ace Community Challenge Charter School"},"geometry":{"type":"Point","coordinates":[-104.9984934,39.7314998]}},{"type":"Feature","properties":{"Label":"All Saints School"},"geometry":{"type":"Point","coordinates":[-105.0263719,39.6719318]}},{"type":"Feature","properties":{"Label":"Annunciation School"},"geometry":{"type":"Point","coordinates":[-104.9705359,39.7663756]}},{"type":"Feature","properties":{"Label":"Arrupe Jesuit High School"},"geometry":{"type":"Point","coordinates":[-105.0454852,39.7755246]}},{"type":"Feature","properties":{"Label":"Art Students League of Denver"},"geometry":{"type":"Point","coordinates":[-104.9834754,39.719729]}},{"type":"Feature","properties":{"Label":"Asbury Elementary School"},"geometry":{"type":"Point","coordinates":[-104.9716187,39.680059]}},{"type":"Feature","properties":{"Label":"Ashley Elementary School"},"geometry":{"type":"Point","coordinates":[-104.8982681,39.7460264]}},{"type":"Feature","properties":{"Label":"Barnum Elementary School"},"geometry":{"type":"Point","coordinates":[-105.0294384,39.717646]}},{"type":"Feature","properties":{"Label":"Barrett Elementary School"},"geometry":{"type":"Point","coordinates":[-104.9427024,39.7588796]}},{"type":"Feature","properties":{"Label":"Belmont School"},"geometry":{"type":"Point","coordinates":[-105.0452612,39.7030428]}},{"type":"Feature","properties":{"Label":"Ben M Cherrington Hall"},"geometry":{"type":"Point","coordinates":[-104.9622222,39.6761111]}},{"type":"Feature","properties":{"Label":"Beth Jacob High School"},"geometry":{"type":"Point","coordinates":[-105.0523873,39.7382804]}},{"type":"Feature","properties":{"Label":"Bishop Machebeuf Catholic High School"},"geometry":{"type":"Point","coordinates":[-104.8906643,39.7241649]}},{"type":"Feature","properties":{"Label":"Blessed Sacrament Catholic School"},"geometry":{"type":"Point","coordinates":[-104.9301562,39.7464878]}},{"type":"Feature","properties":{"Label":"Bradley International School"},"geometry":{"type":"Point","coordinates":[-104.9300381,39.6637305]}},{"type":"Feature","properties":{"Label":"Bright Horizons Montessori at the Marina"},"geometry":{"type":"Point","coordinates":[-104.8935,39.6258224]}},{"type":"Feature","properties":{"Label":"Bromwell Elementary School"},"geometry":{"type":"Point","coordinates":[-104.9569683,39.7222335]}},{"type":"Feature","properties":{"Label":"Bruce Randolph School"},"geometry":{"type":"Point","coordinates":[-104.951353,39.7720087]}},{"type":"Feature","properties":{"Label":"Career Education Center Early College of Denver"},"geometry":{"type":"Point","coordinates":[-105.0225991,39.7553682]}},{"type":"Feature","properties":{"Label":"Carson Elementary School"},"geometry":{"type":"Point","coordinates":[-104.9240307,39.7173723]}},{"type":"Feature","properties":{"Label":"Cesar Chávez Academy Denver"},"geometry":{"type":"Point","coordinates":[-105.0437334,39.7685513]}},{"type":"Feature","properties":{"Label":"Chabad Lubavitch"},"geometry":{"type":"Point","coordinates":[-104.9228721,39.7085176]}},{"type":"Feature","properties":{"Label":"Challenges Choices and Images School"},"geometry":{"type":"Point","coordinates":[-104.8563517,39.7782335]}},{"type":"Feature","properties":{"Label":"Cheltenham Elementary School"},"geometry":{"type":"Point","coordinates":[-105.0308054,39.7420581]}},{"type":"Feature","properties":{"Label":"Children's Music Academy"},"geometry":{"type":"Point","coordinates":[-104.9465584,39.734885]}},{"type":"Feature","properties":{"Label":"Christ the King School"},"geometry":{"type":"Point","coordinates":[-104.9289447,39.7301698]}},{"type":"Feature","properties":{"Label":"Cole Arts and Sciences Academy"},"geometry":{"type":"Point","coordinates":[-104.9691834,39.7626435]}},{"type":"Feature","properties":{"Label":"College View Elementary School"},"geometry":{"type":"Point","coordinates":[-105.0222052,39.6683207]}},{"type":"Feature","properties":{"Label":"Colorado Christian School"},"geometry":{"type":"Point","coordinates":[-104.9582799,39.7123755]}},{"type":"Feature","properties":{"Label":"Colorado Nurses Aide School"},"geometry":{"type":"Point","coordinates":[-104.9139731,39.6659236]}},{"type":"Feature","properties":{"Label":"Colorado Outward Bound School"},"geometry":{"type":"Point","coordinates":[-105.0549136,39.78963]}},{"type":"Feature","properties":{"Label":"Columbine Elementary School"},"geometry":{"type":"Point","coordinates":[-104.9565575,39.7579469]}},{"type":"Feature","properties":{"Label":"Compassion Road Academy High School"},"geometry":{"type":"Point","coordinates":[-104.9914784,39.7322383]}},{"type":"Feature","properties":{"Label":"Dardano's School of Gymnastics"},"geometry":{"type":"Point","coordinates":[-104.9170918,39.7500776]}},{"type":"Feature","properties":{"Label":"Denison Montessori School"},"geometry":{"type":"Point","coordinates":[-105.0513726,39.6833206]}},{"type":"Feature","properties":{"Label":"Denver Academy"},"geometry":{"type":"Point","coordinates":[-104.9350814,39.6736638]}},{"type":"Feature","properties":{"Label":"Denver Academy of Torah"},"geometry":{"type":"Point","coordinates":[-104.9091404,39.712032]}},{"type":"Feature","properties":{"Label":"Denver Christian High School"},"geometry":{"type":"Point","coordinates":[-104.980977,39.6779473]}},{"type":"Feature","properties":{"Label":"Denver Lutheran High School"},"geometry":{"type":"Point","coordinates":[-105.0283163,39.6955428]}},{"type":"Feature","properties":{"Label":"Denver Public Schools Night High School"},"geometry":{"type":"Point","coordinates":[-105.02732,39.6762]}},{"type":"Feature","properties":{"Label":"Denver School of Photography"},"geometry":{"type":"Point","coordinates":[-104.9726222,39.7257206]}},{"type":"Feature","properties":{"Label":"Denver School of the Arts"},"geometry":{"type":"Point","coordinates":[-104.9057031,39.7480804]}},{"type":"Feature","properties":{"Label":"Donna Baldwin Modeling Agency"},"geometry":{"type":"Point","coordinates":[-105.0141952,39.7597614]}},{"type":"Feature","properties":{"Label":"Dora Moore School"},"geometry":{"type":"Point","coordinates":[-104.9735303,39.729965]}},{"type":"Feature","properties":{"Label":"Doull Elementary School"},"geometry":{"type":"Point","coordinates":[-105.0444281,39.6727652]}},{"type":"Feature","properties":{"Label":"East High School"},"geometry":{"type":"Point","coordinates":[-104.9558,39.74162]}},{"type":"Feature","properties":{"Label":"Emily Griffith College of Trades and Technology"},"geometry":{"type":"Point","coordinates":[-105.0056644,39.7361239]}},{"type":"Feature","properties":{"Label":"Emily Griffith High School"},"geometry":{"type":"Point","coordinates":[-104.9857343,39.7458073]}},{"type":"Feature","properties":{"Label":"Emmaus Lutheran School"},"geometry":{"type":"Point","coordinates":[-105.0297507,39.7614256]}},{"type":"Feature","properties":{"Label":"Fairview Elementary School"},"geometry":{"type":"Point","coordinates":[-105.0208526,39.7341953]}},{"type":"Feature","properties":{"Label":"Family Star Montessori School"},"geometry":{"type":"Point","coordinates":[-105.02483,39.7504972]}},{"type":"Feature","properties":{"Label":"Flamenco Denver"},"geometry":{"type":"Point","coordinates":[-104.9984891,39.7311275]}},{"type":"Feature","properties":{"Label":"Force Elementary School"},"geometry":{"type":"Point","coordinates":[-105.0472059,39.6888762]}},{"type":"Feature","properties":{"Label":"Garden Place Elementary School"},"geometry":{"type":"Point","coordinates":[-104.9862793,39.776866]}},{"type":"Feature","properties":{"Label":"Gilpin Montessori Public School"},"geometry":{"type":"Point","coordinates":[-104.9761581,39.7582879]}},{"type":"Feature","properties":{"Label":"Golden Triangle Learning Center"},"geometry":{"type":"Point","coordinates":[-104.9886172,39.731843]}},{"type":"Feature","properties":{"Label":"Goldrick Elementary School"},"geometry":{"type":"Point","coordinates":[-105.0147048,39.6974872]}},{"type":"Feature","properties":{"Label":"Good Shepherd Catholic Middle School"},"geometry":{"type":"Point","coordinates":[-104.9563113,39.7258421]}},{"type":"Feature","properties":{"Label":"Good Shepherd School"},"geometry":{"type":"Point","coordinates":[-104.9524799,39.7316786]}},{"type":"Feature","properties":{"Label":"Grace School"},"geometry":{"type":"Point","coordinates":[-104.9274695,39.7305082]}},{"type":"Feature","properties":{"Label":"Graland Country Day School"},"geometry":{"type":"Point","coordinates":[-104.9359,39.71696]}},{"type":"Feature","properties":{"Label":"Greenlee Elementary School"},"geometry":{"type":"Point","coordinates":[-105.0008926,39.734475]}},{"type":"Feature","properties":{"Label":"Green Valley Elementary School"},"geometry":{"type":"Point","coordinates":[-104.7483504,39.772759]}},{"type":"Feature","properties":{"Label":"Gust Elementary School"},"geometry":{"type":"Point","coordinates":[-105.0313721,39.6672096]}},{"type":"Feature","properties":{"Label":"Hallett Fundamental Academy"},"geometry":{"type":"Point","coordinates":[-104.9183104,39.7598016]}},{"type":"Feature","properties":{"Label":"Hamilton Middle School"},"geometry":{"type":"Point","coordinates":[-104.8922019,39.6600097]}},{"type":"Feature","properties":{"Label":"Harrington Elementary School"},"geometry":{"type":"Point","coordinates":[-104.9585838,39.768813]}},{"type":"Feature","properties":{"Label":"Highlands Montessori"},"geometry":{"type":"Point","coordinates":[-105.0449336,39.7587339]}},{"type":"Feature","properties":{"Label":"Highline Academy Northeast"},"geometry":{"type":"Point","coordinates":[-104.7612906,39.7959745]}},{"type":"Feature","properties":{"Label":"Hill Middle School Campus of Arts and Sciences"},"geometry":{"type":"Point","coordinates":[-104.9354732,39.7238328]}},{"type":"Feature","properties":{"Label":"Holm Elementary School"},"geometry":{"type":"Point","coordinates":[-104.8920756,39.6575316]}},{"type":"Feature","properties":{"Label":"Horace Mann Middle School"},"geometry":{"type":"Point","coordinates":[-105.0035886,39.7736446]}},{"type":"Feature","properties":{"Label":"Inspire Elementary"},"geometry":{"type":"Point","coordinates":[-104.8697599,39.7999347]}},{"type":"Feature","properties":{"Label":"Johnson Elementary School"},"geometry":{"type":"Point","coordinates":[-105.0288719,39.6835984]}},{"type":"Feature","properties":{"Label":"Kabbalah Experience"},"geometry":{"type":"Point","coordinates":[-104.9222041,39.6504171]}},{"type":"Feature","properties":{"Label":"Kepner Middle School"},"geometry":{"type":"Point","coordinates":[-105.0283163,39.6999872]}},{"type":"Feature","properties":{"Label":"KIPP Northeast Denver Leadership Academy"},"geometry":{"type":"Point","coordinates":[-104.7772138,39.7875238]}},{"type":"Feature","properties":{"Label":"Kipp Sunshine Peak Academy"},"geometry":{"type":"Point","coordinates":[-105.0120529,39.7099476]}},{"type":"Feature","properties":{"Label":"Knapp Elementary School"},"geometry":{"type":"Point","coordinates":[-105.0452612,39.7083205]}},{"type":"Feature","properties":{"Label":"Knight Fundamental School"},"geometry":{"type":"Point","coordinates":[-104.9491466,39.7044317]}},{"type":"Feature","properties":{"Label":"La Academia At The Denver Inner City Parish"},"geometry":{"type":"Point","coordinates":[-104.9974288,39.7308047]}},{"type":"Feature","properties":{"Label":"Laradon Hall"},"geometry":{"type":"Point","coordinates":[-104.9855556,39.79]}},{"type":"Feature","properties":{"Label":"Laradon Vocational Center"},"geometry":{"type":"Point","coordinates":[-104.986092,39.7897086]}},{"type":"Feature","properties":{"Label":"Lincoln Elementary School"},"geometry":{"type":"Point","coordinates":[-104.9810924,39.7035983]}},{"type":"Feature","properties":{"Label":"Loretto Heights College"},"geometry":{"type":"Point","coordinates":[-105.0283166,39.6616541]}},{"type":"Feature","properties":{"Label":"Lowry Elementary School"},"geometry":{"type":"Point","coordinates":[-104.8964862,39.7128783]}},{"type":"Feature","properties":{"Label":"Lowry Montessori School"},"geometry":{"type":"Point","coordinates":[-104.8940335,39.7310281]}},{"type":"Feature","properties":{"Label":"Manual High School"},"geometry":{"type":"Point","coordinates":[-104.9671141,39.756686]}},{"type":"Feature","properties":{"Label":"Marrama Elementary School"},"geometry":{"type":"Point","coordinates":[-104.7644551,39.772434]}},{"type":"Feature","properties":{"Label":"Martin Luther King Jr Early College"},"geometry":{"type":"Point","coordinates":[-104.76025,39.78087]}},{"type":"Feature","properties":{"Label":"McMeen Elementary School"},"geometry":{"type":"Point","coordinates":[-104.9212522,39.6982925]}},{"type":"Feature","properties":{"Label":"Mile High Academy"},"geometry":{"type":"Point","coordinates":[-104.9775116,39.6682152]}},{"type":"Feature","properties":{"Label":"Mile High Montessori Edna Oliver Early Learning Center"},"geometry":{"type":"Point","coordinates":[-104.9747421,39.7548936]}},{"type":"Feature","properties":{"Label":"Montclair School of Academics and Enrichment"},"geometry":{"type":"Point","coordinates":[-104.9097624,39.7336396]}},{"type":"Feature","properties":{"Label":"Montessori Academy of Colorado"},"geometry":{"type":"Point","coordinates":[-104.9782676,39.7596082]}},{"type":"Feature","properties":{"Label":"Montessori Academy Of Colorado"},"geometry":{"type":"Point","coordinates":[-104.983321,39.7557486]}},{"type":"Feature","properties":{"Label":"Montessori Children's House of Denver"},"geometry":{"type":"Point","coordinates":[-104.9402123,39.726953]}},{"type":"Feature","properties":{"Label":"Montessori School of Denver"},"geometry":{"type":"Point","coordinates":[-104.9217013,39.6901661]}},{"type":"Feature","properties":{"Label":"Morey Middle School"},"geometry":{"type":"Point","coordinates":[-104.977055,39.7376933]}},{"type":"Feature","properties":{"Label":"Munroe Elementary School"},"geometry":{"type":"Point","coordinates":[-105.0313718,39.7074872]}},{"type":"Feature","properties":{"Label":"National Ballet Denver"},"geometry":{"type":"Point","coordinates":[-104.769022,39.8214476]}},{"type":"Feature","properties":{"Label":"Newlon Elementary School"},"geometry":{"type":"Point","coordinates":[-105.0466732,39.7216584]}},{"type":"Feature","properties":{"Label":"NoteableKids Arts Center"},"geometry":{"type":"Point","coordinates":[-104.8933803,39.6249571]}},{"type":"Feature","properties":{"Label":"Notre Dame Catholic School"},"geometry":{"type":"Point","coordinates":[-105.0527616,39.6772096]}},{"type":"Feature","properties":{"Label":"Oleta Crain Enrichment Academy"},"geometry":{"type":"Point","coordinates":[-104.9718541,39.7484652]}},{"type":"Feature","properties":{"Label":"Omar D Blair Charter School"},"geometry":{"type":"Point","coordinates":[-104.7663701,39.7865548]}},{"type":"Feature","properties":{"Label":"Open Door Christian School"},"geometry":{"type":"Point","coordinates":[-104.972453,39.7412564]}},{"type":"Feature","properties":{"Label":"Our Lady of Lourdes School"},"geometry":{"type":"Point","coordinates":[-104.9820598,39.6757064]}},{"type":"Feature","properties":{"Label":"Palmer Elementary School"},"geometry":{"type":"Point","coordinates":[-104.9250232,39.7325318]}},{"type":"Feature","properties":{"Label":"Park Hill Elementary School"},"geometry":{"type":"Point","coordinates":[-104.9293257,39.7453091]}},{"type":"Feature","properties":{"Label":"Park Hill Preparatory School"},"geometry":{"type":"Point","coordinates":[-104.9314639,39.7626267]}},{"type":"Feature","properties":{"Label":"Perry School"},"geometry":{"type":"Point","coordinates":[-105.0394304,39.7179613]}},{"type":"Feature","properties":{"Label":"Pioneer Charter School"},"geometry":{"type":"Point","coordinates":[-104.949259,39.7689334]}},{"type":"Feature","properties":{"Label":"Place Bridge Academy"},"geometry":{"type":"Point","coordinates":[-104.9059432,39.6883992]}},{"type":"Feature","properties":{"Label":"Polaris At Ebert Elementary School"},"geometry":{"type":"Point","coordinates":[-104.9820036,39.7498796]}},{"type":"Feature","properties":{"Label":"Preparatory Center Charter Alternative School"},"geometry":{"type":"Point","coordinates":[-104.95778,39.7563003]}},{"type":"Feature","properties":{"Label":"Redeemer Lutheran School"},"geometry":{"type":"Point","coordinates":[-105.0313675,39.7101004]}},{"type":"Feature","properties":{"Label":"Richard Castro Elementary School"},"geometry":{"type":"Point","coordinates":[-105.0355387,39.7013761]}},{"type":"Feature","properties":{"Label":"Rishel Middle School"},"geometry":{"type":"Point","coordinates":[-105.0114441,39.7089034]}},{"type":"Feature","properties":{"Label":"Rocky Mountain Fire Academy"},"geometry":{"type":"Point","coordinates":[-104.9002114,39.7958932]}},{"type":"Feature","properties":{"Label":"Rocky Mountain Hebrew Academy"},"geometry":{"type":"Point","coordinates":[-104.9299571,39.710771]}},{"type":"Feature","properties":{"Label":"Rocky Mountain School of Expeditionary Learning"},"geometry":{"type":"Point","coordinates":[-104.9213144,39.685279]}},{"type":"Feature","properties":{"Label":"Rosedale Elementary School"},"geometry":{"type":"Point","coordinates":[-104.9845001,39.6746185]}},{"type":"Feature","properties":{"Label":"Sabin Elementary School"},"geometry":{"type":"Point","coordinates":[-105.0452615,39.6597097]}},{"type":"Feature","properties":{"Label":"Sacred Heart House of Denver"},"geometry":{"type":"Point","coordinates":[-104.9810631,39.7602082]}},{"type":"Feature","properties":{"Label":"Saint Anthony of Padua School"},"geometry":{"type":"Point","coordinates":[-105.0369276,39.702765]}},{"type":"Feature","properties":{"Label":"Saint Catherine's Catholic Elementary & Middle School"},"geometry":{"type":"Point","coordinates":[-105.024912,39.7751185]}},{"type":"Feature","properties":{"Label":"Saint Francis de Sales School"},"geometry":{"type":"Point","coordinates":[-104.9855431,39.7117565]}},{"type":"Feature","properties":{"Label":"Saint James School"},"geometry":{"type":"Point","coordinates":[-104.9090627,39.7368584]}},{"type":"Feature","properties":{"Label":"Saint John School"},"geometry":{"type":"Point","coordinates":[-104.9563328,39.7264135]}},{"type":"Feature","properties":{"Label":"Saint Johns School"},"geometry":{"type":"Point","coordinates":[-104.9680363,39.702765]}},{"type":"Feature","properties":{"Label":"Saint John Vianney Theological Seminary"},"geometry":{"type":"Point","coordinates":[-104.9477578,39.6927651]}},{"type":"Feature","properties":{"Label":"Saint Philomena School"},"geometry":{"type":"Point","coordinates":[-104.9525657,39.7311367]}},{"type":"Feature","properties":{"Label":"Saint Vincent de Paul School"},"geometry":{"type":"Point","coordinates":[-104.9577355,39.6953428]}},{"type":"Feature","properties":{"Label":"Samuels Elementary School"},"geometry":{"type":"Point","coordinates":[-104.8918013,39.6427012]}},{"type":"Feature","properties":{"Label":"Schenck Elementary School"},"geometry":{"type":"Point","coordinates":[-105.033872,39.6924873]}},{"type":"Feature","properties":{"Label":"Schmitt Elementary School"},"geometry":{"type":"Point","coordinates":[-105.011927,39.6835984]}},{"type":"Feature","properties":{"Label":"Silicon STEM Academy"},"geometry":{"type":"Point","coordinates":[-104.9388083,39.6685111]}},{"type":"Feature","properties":{"Label":"Sims-Fayola International Academy"},"geometry":{"type":"Point","coordinates":[-104.7690381,39.820397]}},{"type":"Feature","properties":{"Label":"Smedley Elementary School"},"geometry":{"type":"Point","coordinates":[-105.0094395,39.7749957]}},{"type":"Feature","properties":{"Label":"Smiley Middle School"},"geometry":{"type":"Point","coordinates":[-104.9213084,39.7537811]}},{"type":"Feature","properties":{"Label":"Smith Renaissance School"},"geometry":{"type":"Point","coordinates":[-104.9183371,39.7670904]}},{"type":"Feature","properties":{"Label":"South High School"},"geometry":{"type":"Point","coordinates":[-104.9659482,39.6921175]}},{"type":"Feature","properties":{"Label":"Southmoor Elementary School"},"geometry":{"type":"Point","coordinates":[-104.9118402,39.6481053]}},{"type":"Feature","properties":{"Label":"Southwest Early College"},"geometry":{"type":"Point","coordinates":[-105.0266218,39.6615509]}},{"type":"Feature","properties":{"Label":"Steck Elementary School"},"geometry":{"type":"Point","coordinates":[-104.9385383,39.7236787]}},{"type":"Feature","properties":{"Label":"Stedman Elementary School"},"geometry":{"type":"Point","coordinates":[-104.9323722,39.7598671]}},{"type":"Feature","properties":{"Label":"Steele Elementary School"},"geometry":{"type":"Point","coordinates":[-104.9716603,39.7102549]}},{"type":"Feature","properties":{"Label":"STRIVE Prep - RISE"},"geometry":{"type":"Point","coordinates":[-104.7769216,39.7880217]}},{"type":"Feature","properties":{"Label":"Swansea Elementary School"},"geometry":{"type":"Point","coordinates":[-104.9564704,39.7812723]}},{"type":"Feature","properties":{"Label":"Teikyo Loretto Heights University"},"geometry":{"type":"Point","coordinates":[-105.0283333,39.6619444]}},{"type":"Feature","properties":{"Label":"Teller Elementary School"},"geometry":{"type":"Point","coordinates":[-104.9435597,39.7345798]}},{"type":"Feature","properties":{"Label":"Temple Emanuel Early Childhood Center"},"geometry":{"type":"Point","coordinates":[-104.9263368,39.7166396]}},{"type":"Feature","properties":{"Label":"The Center for Relationship Education"},"geometry":{"type":"Point","coordinates":[-104.8927352,39.625267]}},{"type":"Feature","properties":{"Label":"The Denver Waldorf School"},"geometry":{"type":"Point","coordinates":[-104.9526873,39.7314538]}},{"type":"Feature","properties":{"Label":"The Montessori Institute"},"geometry":{"type":"Point","coordinates":[-105.0322914,39.7279733]}},{"type":"Feature","properties":{"Label":"The Odyssey School"},"geometry":{"type":"Point","coordinates":[-104.9120084,39.7480345]}},{"type":"Feature","properties":{"Label":"The Rise School"},"geometry":{"type":"Point","coordinates":[-104.930757,39.6593449]}},{"type":"Feature","properties":{"Label":"Thomas Jefferson High School"},"geometry":{"type":"Point","coordinates":[-104.9213682,39.6469321]}},{"type":"Feature","properties":{"Label":"Traylor Elementary School"},"geometry":{"type":"Point","coordinates":[-105.0622065,39.6610986]}},{"type":"Feature","properties":{"Label":"Turing School of Software & Design"},"geometry":{"type":"Point","coordinates":[-104.999964,39.7497041]}},{"type":"Feature","properties":{"Label":"University Park Elementary School"},"geometry":{"type":"Point","coordinates":[-104.950424,39.6744482]}},{"type":"Feature","properties":{"Label":"Valverde Elementary School"},"geometry":{"type":"Point","coordinates":[-105.0113713,39.6941539]}},{"type":"Feature","properties":{"Label":"Vanguard Classical School"},"geometry":{"type":"Point","coordinates":[-104.887526,39.729514]}},{"type":"Feature","properties":{"Label":"Venture Prep High School"},"geometry":{"type":"Point","coordinates":[-104.9426447,39.7584734]}},{"type":"Feature","properties":{"Label":"Watch Care Academy"},"geometry":{"type":"Point","coordinates":[-104.928433,39.7664944]}},{"type":"Feature","properties":{"Label":"West Denver Preparatory Charter School"},"geometry":{"type":"Point","coordinates":[-105.0252643,39.6832533]}},{"type":"Feature","properties":{"Label":"Whiteman Elementary School"},"geometry":{"type":"Point","coordinates":[-104.9101388,39.7227278]}},{"type":"Feature","properties":{"Label":"Whittier ECE-8 School"},"geometry":{"type":"Point","coordinates":[-104.9729275,39.752927]}},{"type":"Feature","properties":{"Label":"Wick Irish Dance"},"geometry":{"type":"Point","coordinates":[-104.9154295,39.6668918]}},{"type":"Feature","properties":{"Label":"Wyatt-Edison Charter School"},"geometry":{"type":"Point","coordinates":[-104.9676759,39.7676283]}},{"type":"Feature","properties":{"Label":"Yeshiva Toras Chaim"},"geometry":{"type":"Point","coordinates":[-105.0436111,39.7186111]}},{"type":"Feature","properties":{"Label":"Yeshiva Toras Chaim Talmudic Seminary of Denver"},"geometry":{"type":"Point","coordinates":[-105.0434214,39.7418391]}},{"type":"Feature","properties":{"Label":null},"geometry":{"type":"Point","coordinates":[-104.9007048,39.6512688]}}]}

        map.on('load', () => {
            map.addLayer({
                id: 'hospitals',
                type: 'symbol',
                source: {
                    type: 'geojson',
                    data: hospitals
                },
                layout: {
                    'icon-image': 'hospital-15',
                    'icon-allow-overlap': true
                },
                paint: {}
            });
            map.addLayer({
                id: 'schools',
                type: 'symbol',
                source: {
                    type: 'geojson',
                    data: schools
                },
                layout: {
                    'icon-image': 'school-15',
                },
                paint: {}
            });

            const popup = new mapboxgl.Popup();

            map.on('mousemove', (event) => {
                const features = map.queryRenderedFeatures(event.point, {
                    layers: ['hospitals', 'schools']
                });
                if (!features.length) {
                    popup.remove();
                    return;
                }
                const feature = features[0];

                popup
                    .setLngLat(feature.geometry.coordinates)
                    .setHTML(feature.properties.Label)
                    .addTo(map);

                map.getCanvas().style.cursor = features.length ? 'pointer' : '';
            });

            map.addSource('nearest-hospital', {
                type: 'geojson',
                data: {
                    type: 'FeatureCollection',
                    features: []
                }
            });

            map.on('click', (event) => {
                // Return any features from the 'libraries' layer whenever the map is clicked
                const schoolFeatures = map.queryRenderedFeatures(event.point, {
                    layers: ['schools']
                });
                if (!schoolFeatures.length) {
                    return;
                }
                const schoolFeature = schoolFeatures[0];

                // Using Turf, find the nearest hospital to library clicked
                const nearestHospital = turf.nearest(schoolFeature, hospitals);

                // If a nearest library is not found, return early
                if (nearestHospital === null) return;
                // Update the 'nearest-library' data source to include
                // the nearest library
                map.getSource('nearest-hospital').setData({
                    type: 'FeatureCollection',
                    features: [nearestHospital]
                });

                // Create a new circle layer from the 'nearest-library' data source
                if (map.getLayer('nearest-hospital')) {
                    map.removeLayer('nearest-hospital');
                }
                map.addLayer({
                        id: 'nearest-hospital',
                        type: 'circle',
                        source: 'nearest-hospital',
                        paint: {
                            'circle-radius': 12,
                            'circle-color': 'red'
                        }
                    },
                    'hospitals'
                );
            });
        });
    </script>

</body>

</html>